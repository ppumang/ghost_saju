import type { OhHaeng, InterpretationData } from './types';

// ──────────────────────────────────────────────
// 용신 오행 → 색상/방향/숫자/계절/맛
// ──────────────────────────────────────────────

const YONGSHIN_ATTRIBUTES: Record<OhHaeng, InterpretationData['yongShinAttributes']> = {
  '목': { color: '초록/청색', direction: '동쪽', number: '3, 8', season: '봄 (2~4월)', taste: '신맛' },
  '화': { color: '빨강/주황', direction: '남쪽', number: '2, 7', season: '여름 (5~7월)', taste: '쓴맛' },
  '토': { color: '노랑/갈색', direction: '중앙', number: '5, 10', season: '환절기 (3·6·9·12월 끝)', taste: '단맛' },
  '금': { color: '흰색/은색', direction: '서쪽', number: '4, 9', season: '가을 (8~10월)', taste: '매운맛' },
  '수': { color: '검정/남색', direction: '북쪽', number: '1, 6', season: '겨울 (11~1월)', taste: '짠맛' },
};

// ──────────────────────────────────────────────
// 오행 → 직업 카테고리 / 구체 직업
// ──────────────────────────────────────────────

const OHAENG_CAREERS: Record<OhHaeng, { categories: string[]; specificJobs: string[] }> = {
  '목': {
    categories: ['교육', '출판/언론', '의류/패션', '농림/원예', '가구/목재', '법률/행정'],
    specificJobs: ['교사', '교수', '작가', '기자', '편집자', '변호사', '한의사', '조경사', '패션디자이너', '플로리스트'],
  },
  '화': {
    categories: ['IT/전자', '에너지', '요식업', '예술/연예', '미용', '광고/마케팅'],
    specificJobs: ['프로그래머', '데이터분석가', '셰프', '배우', '아나운서', '메이크업아티스트', '유튜버', '마케터', '전기기사', '사진작가'],
  },
  '토': {
    categories: ['부동산', '건설', '중개/유통', '농업', '종교/철학', '공무원'],
    specificJobs: ['부동산중개사', '건축가', '공인중개사', '농업경영', '사회복지사', '상담사', '요가강사', '공무원', '보험설계사', '감정평가사'],
  },
  '금': {
    categories: ['금융', '기계/제조', '의료', '군/경찰', '보석/귀금속', 'IT보안'],
    specificJobs: ['금융분석가', '회계사', '외과의사', '치과의사', '엔지니어', '군인', '경찰관', '보석감정사', '보안전문가', '품질관리자'],
  },
  '수': {
    categories: ['무역', '물류/운송', '관광/여행', '음료/주류', '수산', '학문/연구'],
    specificJobs: ['무역상', '물류전문가', '여행가이드', '바텐더', '해양생물학자', '연구원', '철학자', '심리상담사', '프리랜서작가', '통역사'],
  },
};

// ──────────────────────────────────────────────
// 신살별 표준 해석
// ──────────────────────────────────────────────

const SINSAL_INTERPRETATIONS: Record<string, { meaning: string; positive: string; negative: string; advice: string }> = {
  '도화살': {
    meaning: '매력과 이성 관계의 살',
    positive: '뛰어난 대인 매력, 예술적 감각, 사교성이 좋아 사람을 끌어모으는 능력',
    negative: '이성 문제, 색정 시비, 감정에 쉽게 빠져 판단력이 흐려짐',
    advice: '매력을 직업(예술/서비스업/대인업무)으로 승화시키면 큰 자산이 된다',
  },
  '역마살': {
    meaning: '이동과 변동의 살',
    positive: '활동력이 넘치고 해외운/여행운이 좋다. 무역/외교/물류에 강점',
    negative: '한 곳에 정착하기 어렵고, 직장/거주지 변동이 잦다',
    advice: '움직이는 직업(영업/무역/운송/프리랜서)이 체질에 맞다. 억지로 붙잡아두면 오히려 독',
  },
  '화개살': {
    meaning: '영적 감수성과 학문의 살',
    positive: '직관력이 뛰어나고 종교/철학/예술 분야에 재능. 깊은 통찰력',
    negative: '고독하기 쉽고, 현실보다 이상에 빠질 수 있다. 우울 경향',
    advice: '명상/수행/예술로 감수성을 다스리면 큰 지혜가 된다',
  },
  '반안살': {
    meaning: '안장 위의 살 — 이동 중 위험',
    positive: '승부사 기질, 도전정신이 강하다',
    negative: '이동/여행 중 사고 조심, 급하게 움직이면 다칠 수 있다',
    advice: '차량 운전 시 특히 주의. 서두르지 말고 안전을 우선할 것',
  },
  '육해': {
    meaning: '서로 해(害)가 되는 관계',
    positive: '갈등을 통해 성장하는 구조. 독립심이 강해진다',
    negative: '가까운 사람과 갈등이 잦고, 오해가 쌓이기 쉽다',
    advice: '감정을 참지 말고 적절히 표현하면 관계가 오히려 깊어진다',
  },
  '현침살': {
    meaning: '바늘처럼 찌르는 날카로운 살',
    positive: '분석력/정밀함이 뛰어나고 의료/연구/기술 분야에 적합',
    negative: '날카로운 것에 의한 부상 주의. 신경이 예민해 스트레스에 약하다',
    advice: '정밀한 작업이 필요한 직업(의사/엔지니어/프로그래머)에서 빛난다',
  },
  '귀문관살': {
    meaning: '귀신의 문이 열려 있는 살',
    positive: '영적 감각이 발달하고 직감이 뛰어나다. 상담/심리/종교 분야 재능',
    negative: '불안/공포/악몽에 시달릴 수 있다. 정신적 에너지 소모가 크다',
    advice: '규칙적인 생활과 명상으로 마음을 안정시킬 것. 깊은 밤에 혼자 돌아다니지 말 것',
  },
  '지살': {
    meaning: '땅의 재난을 뜻하는 살',
    positive: '위기 대응 능력이 뛰어나고 생존 본능이 강하다',
    negative: '부동산/토지 관련 손실 주의, 가정 내 갈등',
    advice: '부동산 투자는 신중하게. 가정의 안정이 모든 운의 기반',
  },
  '양인살': {
    meaning: '양의 칼날 — 극도로 강한 기운',
    positive: '결단력과 추진력이 비범. 군인/경찰/외과의사에 적합',
    negative: '성격이 급하고 극단적. 다툼/소송/부상 위험',
    advice: '에너지를 운동이나 경쟁적 분야로 풀면 큰 성취를 이룬다',
  },
  '괴강살': {
    meaning: '하늘의 강(罡) — 강렬한 기운',
    positive: '지도력이 뛰어나고 카리스마가 있다. 큰일을 도모하는 사주',
    negative: '독선적이 되기 쉽고, 부부 갈등의 원인이 된다',
    advice: '겸손함을 의식적으로 연습하면 리더십이 빛난다',
  },
  '백호살': {
    meaning: '흰 호랑이 — 혈광(血光)의 살',
    positive: '용감하고 정의감이 강하다. 위기 상황에서 진가를 발휘',
    negative: '수술/사고/유혈 관련 일을 조심. 가까운 사람의 건강 문제',
    advice: '건강검진을 정기적으로 받고, 위험한 활동은 보호장비를 갖출 것',
  },
  '겁살': {
    meaning: '도적과 겁탈의 살',
    positive: '담력이 크고 모험심이 강하다. 사업가 기질',
    negative: '금전 손실, 사기 주의. 도둑/강도 피해 가능성',
    advice: '보증은 절대 서지 말 것. 투자는 분산할 것',
  },
  '천라지망': {
    meaning: '하늘의 그물에 걸린 형상',
    positive: '한 번 잡으면 놓치지 않는 집중력. 전문가 기질',
    negative: '법적 분쟁/소송에 휘말리기 쉽다. 갑작스러운 변고 주의',
    advice: '법적 문서는 꼼꼼히 확인. 합의서/계약서를 반드시 서면으로',
  },
  '망신살': {
    meaning: '체면과 명예를 잃는 살',
    positive: '체면에 얽매이지 않는 자유로움. 파격적 발상',
    negative: '체면 손상, 비밀 폭로, 망신당할 일이 생길 수 있다',
    advice: 'SNS/술자리에서 말조심. 비밀은 혼자 간직할 것',
  },
  '장성살': {
    meaning: '장군의 별 — 지위와 명예의 살',
    positive: '리더십이 뛰어나고 조직에서 높은 지위에 오를 가능성',
    negative: '권위주의에 빠질 수 있고, 경쟁이 치열하다',
    advice: '겸양과 배려로 리더십을 발휘하면 대성한다',
  },
  '공망살': {
    meaning: '비어있는 형상 — 공허의 살',
    positive: '세속적 욕심이 적고 정신적 성장이 빠르다. 종교/학문에 유리',
    negative: '해당 기둥(시기)의 일이 허무하게 느껴지거나 결과가 약하다',
    advice: '물질보다 정신/학문/봉사에 투자하면 공망이 오히려 복이 된다',
  },
  '홍염살': {
    meaning: '붉은 매력의 살 — 이성을 끌어들이는 화려한 기운',
    positive: '타고난 매력과 예술적 감각. 대인관계가 넓고 인기가 많다',
    negative: '색정 문제, 이성 관계 복잡, 감정적 판단 오류 주의',
    advice: '감정에 휩쓸리지 말고 이성적 판단을 유지할 것. 예술/미용 분야에서 재능 발휘',
  },
};

// ──────────────────────────────────────────────
// 십이운성별 표준 해석
// ──────────────────────────────────────────────

const SIPII_UNSEONG_INTERPRETATIONS: Record<string, { meaning: string; energy: string; advice: string }> = {
  '장생': { meaning: '탄생/시작', energy: '새로운 시작의 에너지. 희망과 순수함.', advice: '새로운 일을 시작하기에 좋다. 배움의 자세를 유지할 것.' },
  '목욕': { meaning: '목욕/성장통', energy: '불안정하지만 급성장. 시행착오의 시기.', advice: '충동적 결정을 피하고 꾸준히 실력을 쌓을 것.' },
  '관대': { meaning: '관을 쓰다/성인', energy: '사회적 인정을 받기 시작. 자신감이 생긴다.', advice: '겸손하되 당당하게. 기회가 오면 적극적으로 잡아라.' },
  '건록': { meaning: '녹봉을 받다/전성기', energy: '왕성한 활동력. 일이 잘 풀리는 시기.', advice: '전성기의 에너지를 최대한 활용하되, 다음을 위한 준비도 할 것.' },
  '제왕': { meaning: '최고봉/절정', energy: '최고 전성기. 모든 것이 만개한 상태.', advice: '정점에서 내려올 준비를 해라. 겸손함이 전성기를 연장시킨다.' },
  '쇠': { meaning: '쇠퇴/하강', energy: '기운이 줄어들기 시작. 지혜와 경험이 쌓인다.', advice: '무리하지 말고 지혜로 승부하라. 후배 양성에 힘쓸 때.' },
  '병': { meaning: '병듦/약화', energy: '에너지가 크게 약해진 상태. 내면에 집중.', advice: '건강관리가 최우선. 조용히 내실을 다지는 시기.' },
  '사': { meaning: '죽음/전환', energy: '한 사이클의 끝. 극적인 변환점.', advice: '낡은 것을 버리고 새로운 시작을 준비하라. 끝이 곧 시작.' },
  '묘': { meaning: '무덤/저장', energy: '잠복기. 겉으로는 조용하지만 내면에 축적 중.', advice: '결과가 안 보여도 포기하지 마라. 씨앗이 땅 속에서 자라는 중.' },
  '절': { meaning: '단절/새 싹', energy: '완전한 리셋. 가장 약하지만 새로운 가능성.', advice: '과거를 완전히 놓아라. 가장 밑바닥이 새로운 출발점.' },
  '태': { meaning: '잉태/가능성', energy: '새로운 생명이 잉태. 가능성의 씨앗.', advice: '아직 때가 아니다. 조용히 계획하고 준비하는 시기.' },
  '양': { meaning: '양육/준비', energy: '씨앗이 자라는 중. 아직 드러나지 않은 성장.', advice: '인내심을 가지고 기초를 다져라. 곧 싹이 틔운다.' },
};

// ──────────────────────────────────────────────
// 십신별 성격/관계/직업/건강 해석
// ──────────────────────────────────────────────

const SIPSHIN_INTERPRETATIONS: Record<string, { personality: string; relationship: string; career: string; health: string }> = {
  '비견': {
    personality: '독립적이고 자존심이 강하다. 경쟁심이 있지만 의리도 있다.',
    relationship: '동등한 관계를 추구. 형제/친구와의 경쟁과 협력.',
    career: '독립 사업, 프리랜서, 동업이 맞지만 주도권 갈등 주의.',
    health: '과로 주의. 면역력 관리.',
  },
  '겁재': {
    personality: '야심차고 승부욕이 강하다. 과감하지만 때로 무모하다.',
    relationship: '경쟁적 관계가 많고, 금전 관련 갈등 소지.',
    career: '투자/영업/스포츠 분야. 보증은 절대 서지 말 것.',
    health: '사고/부상 주의. 스트레스로 인한 면역력 저하.',
  },
  '식신': {
    personality: '낙천적이고 여유롭다. 먹는 것과 즐기는 것을 좋아한다.',
    relationship: '넉넉한 인품으로 사람이 모인다. 자녀복이 있다.',
    career: '요리/예술/교육/서비스업. 꾸준하고 안정적인 수입.',
    health: '과식/비만 주의. 소화기 관리.',
  },
  '상관': {
    personality: '표현력이 뛰어나고 재치가 넘친다. 반항적이고 기존 질서에 도전.',
    relationship: '말로 상처를 주기 쉽다. 직설적이라 오해를 산다.',
    career: '예술/엔터테인먼트/변호사/평론가. 창의적 분야에서 두각.',
    health: '신경 과민, 불면증 주의. 스트레스 관리가 핵심.',
  },
  '편재': {
    personality: '사교적이고 통이 크다. 돈을 벌기도 잘 하지만 쓰기도 잘 한다.',
    relationship: '사람을 잘 사귀고 인맥이 넓다. 이성 관계 복잡할 수 있다.',
    career: '무역/유통/사업/주식. 유동적인 재물에 강하다.',
    health: '간/담 관련 주의. 과로와 음주 자제.',
  },
  '정재': {
    personality: '성실하고 계획적이다. 저축을 잘 하고 안정을 추구한다.',
    relationship: '가정적이고 의무감이 강하다. 배우자복이 있다.',
    career: '회계/금융/공무원/관리직. 안정적 급여가 맞다.',
    health: '스트레스로 인한 위장 장애 주의.',
  },
  '편관': {
    personality: '카리스마가 있고 정의감이 강하다. 때로 강압적.',
    relationship: '상하 관계가 명확하다. 직장에서 능력을 인정받는다.',
    career: '군인/경찰/검찰/외과의사/CEO. 권위가 필요한 분야.',
    health: '혈압/심장 주의. 과도한 긴장 관리.',
  },
  '정관': {
    personality: '원칙적이고 도덕적이다. 규칙을 중시하고 책임감이 강하다.',
    relationship: '안정적인 결혼생활. 사회적 평판을 중시한다.',
    career: '공무원/법률/교육/대기업. 조직 내에서 출세.',
    health: '규칙적 생활로 건강 유지. 과로 방지.',
  },
  '편인': {
    personality: '독창적이고 비범한 사고. 학문/연구에 깊이가 있다.',
    relationship: '독립적이라 외로울 수 있다. 특이한 인연을 만난다.',
    career: '연구/발명/IT/종교/점술. 비주류 분야에서 두각.',
    health: '신경쇠약/우울 주의. 규칙적 수면이 중요.',
  },
  '정인': {
    personality: '지적이고 학구적이다. 배움에 대한 열망이 크다.',
    relationship: '어머니 영향이 크다. 정신적 스승을 만날 복.',
    career: '교육/학문/의약/공직. 자격증/학위가 힘이 된다.',
    health: '과로로 인한 두통/어깨결림 주의.',
  },
};

// ──────────────────────────────────────────────
// 해석 데이터 빌더
// ──────────────────────────────────────────────

/**
 * 용신 오행을 기반으로 결정론적 해석 데이터를 생성한다.
 */
export function buildInterpretationData(yongShinOh: OhHaeng): InterpretationData {
  const careers = OHAENG_CAREERS[yongShinOh];

  return {
    yongShinAttributes: YONGSHIN_ATTRIBUTES[yongShinOh],
    careerSuggestions: {
      ohHaeng: yongShinOh,
      categories: careers.categories,
      specificJobs: careers.specificJobs,
    },
    sinsalInterpretations: SINSAL_INTERPRETATIONS,
    sipiiUnseongInterpretations: SIPII_UNSEONG_INTERPRETATIONS,
    sipshinInterpretations: SIPSHIN_INTERPRETATIONS,
  };
}
